import{F as e}from"./Form.395e9067.js";import{d as a,a9 as o,r as t,H as i,x as n,o as s,c as l,g as r,w as d,a as c,a1 as m,h as u,Z as f,a0 as p,y as h,t as y,k as b,aT as v,bo as x}from"./index.9c9e5dbb.js";import{E as g}from"./el-button.67bafb4d.js";import{u as k}from"./useForm.917f4b68.js";const w={key:0},F=a({__name:"Search",props:{schema:{type:Array,default:()=>[]},isCol:o.bool.def(!1),labelWidth:o.oneOfType([String,Number]).def("auto"),layout:o.string.validate((e=>["inline","bottom"].includes(e))).def("inline"),buttomPosition:o.string.validate((e=>["left","center","right"].includes(e))).def("center"),showSearch:o.bool.def(!0),showReset:o.bool.def(!0),expand:o.bool.def(!1),expandField:o.string.def(""),inline:o.bool.def(!0),model:{type:Object,default:()=>({})}},emits:["search","reset"],setup(a,{emit:o}){const F=a,{t:_}=b(),C=t(!0),R=i((()=>{let e=v(F.schema);if(F.expand&&F.expandField&&!c(C)){const a=x(e,(e=>e.field===F.expandField));if(a>-1){const o=e.length;e.splice(a+1,o)}}return"inline"===F.layout&&(e=e.concat([{field:"action",formItemProps:{labelWidth:"0px"}}])),e})),{register:j,elFormRef:S,methods:q}=k({model:F.model||{}}),P=async()=>{var e;await(null==(e=c(S))?void 0:e.validate((async e=>{if(e){const{getFormData:e}=q,a=await e();o("search",a)}})))},W=async()=>{var e;null==(e=c(S))||e.resetFields();const{getFormData:a}=q,t=await a();o("reset",t)},A=i((()=>({textAlign:F.buttomPosition}))),D=()=>{var e;null==(e=c(S))||e.resetFields(),C.value=!c(C)};return(o,t)=>{const i=n("Icon");return s(),l(p,null,[r(c(e),{"is-custom":!1,"label-width":a.labelWidth,"hide-required-asterisk":"",inline:a.inline,"is-col":a.isCol,schema:c(R),onRegister:c(j)},{action:d((()=>["inline"===a.layout?(s(),l("div",w,[a.showSearch?(s(),u(c(g),{key:0,type:"primary",onClick:P},{default:d((()=>[r(i,{icon:"ep:search",class:"mr-5px"}),h(" "+y(c(_)("common.query")),1)])),_:1})):f("v-if",!0),a.showReset?(s(),u(c(g),{key:1,onClick:W},{default:d((()=>[r(i,{icon:"ep:refresh-right",class:"mr-5px"}),h(" "+y(c(_)("common.reset")),1)])),_:1})):f("v-if",!0),a.expand?(s(),u(c(g),{key:2,text:"",onClick:D},{default:d((()=>[h(y(c(_)(C.value?"common.shrink":"common.expand"))+" ",1),r(i,{icon:C.value?"ant-design:up-outlined":"ant-design:down-outlined"},null,8,["icon"])])),_:1})):f("v-if",!0)])):f("v-if",!0)])),_:1},8,["label-width","inline","is-col","schema","onRegister"]),"bottom"===a.layout?(s(),l("div",{key:0,style:m(c(A))},[a.showSearch?(s(),u(c(g),{key:0,type:"primary",onClick:P},{default:d((()=>[r(i,{icon:"ep:search",class:"mr-5px"}),h(" "+y(c(_)("common.query")),1)])),_:1})):f("v-if",!0),a.showReset?(s(),u(c(g),{key:1,onClick:W},{default:d((()=>[r(i,{icon:"ep:refresh-right",class:"mr-5px"}),h(" "+y(c(_)("common.reset")),1)])),_:1})):f("v-if",!0),a.expand?(s(),u(c(g),{key:2,text:"",onClick:D},{default:d((()=>[h(y(c(_)(C.value?"common.shrink":"common.expand"))+" ",1),r(i,{icon:C.value?"ant-design:up-outlined":"ant-design:down-outlined"},null,8,["icon"])])),_:1})):f("v-if",!0)],4)):f("v-if",!0)],64)}}});export{F as _};
